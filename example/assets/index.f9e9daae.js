import{u as Y,l as $,n as y,i as S,h as ee,y as oe,t as V,z as w,v as I,a as t,I as z,A as R,g as B,C as ce,k as L,D as E,E as le,G as de,J as ne,K as se,m as O,L as ue,w as p,f as me,M as fe,s as be,N as K,O as te,x as ge,P as he,q as F,Q as ve,R as ke,S as xe,U as _e,V as ye,W as Se,X as H,Y as J,_ as Pe,Z as D,$ as Ce,o as N,c as Q,b as Z,F as we,a0 as $e,a1 as Be,a2 as pe}from"./index.0d5ca0db.js";import{B as Te}from"./index.7d9b55e6.js";import{T as Ie}from"./index.0d9f17c7.js";const ae={name:Y,shape:$("round"),disabled:Boolean,iconSize:y,modelValue:Y,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var Le=S({props:ee({},ae,{bem:oe(Function),role:String,parent:Object,checked:Boolean,bindGroup:V}),emits:["click","toggle"],setup(e,{emit:n,slots:o}){const d=w(),l=a=>{if(e.parent&&e.bindGroup)return e.parent.props[a]},c=I(()=>l("disabled")||e.disabled),f=I(()=>l("direction")),r=I(()=>{const a=e.checkedColor||l("checkedColor");if(a&&e.checked&&!c.value)return{borderColor:a,backgroundColor:a}}),i=a=>{const{target:m}=a,h=d.value,k=h===m||(h==null?void 0:h.contains(m));!c.value&&(k||!e.labelDisabled)&&n("toggle"),n("click",a)},s=()=>{const{bem:a,shape:m,checked:h}=e,k=e.iconSize||l("iconSize");return t("div",{ref:d,class:a("icon",[m,{disabled:c.value,checked:h}]),style:{fontSize:R(k)}},[o.icon?o.icon({checked:h,disabled:c.value}):t(z,{name:"success",style:r.value},null)])},g=()=>{if(o.default)return t("span",{class:e.bem("label",[e.labelPosition,{disabled:c.value}])},[o.default()])};return()=>{const a=e.labelPosition==="left"?[g(),s()]:[s(),g()];return t("div",{role:e.role,class:e.bem([{disabled:c.value,"label-disabled":e.labelDisabled},f.value]),tabindex:c.value?void 0:0,"aria-checked":e.checked,onClick:i},[a])}}});const[Ve,C]=B("image"),ze={src:String,alt:String,fit:String,position:String,round:Boolean,width:y,height:y,radius:y,lazyLoad:Boolean,iconSize:y,showError:V,errorIcon:$("photo-fail"),iconPrefix:String,showLoading:V,loadingIcon:$("photo")};var Ge=S({name:Ve,props:ze,emits:["load","error"],setup(e,{emit:n,slots:o}){const d=w(!1),l=w(!0),c=w(),{$Lazyload:f}=ce().proxy,r=I(()=>{const u={width:R(e.width),height:R(e.height)};return L(e.radius)&&(u.overflow="hidden",u.borderRadius=R(e.radius)),u});E(()=>e.src,()=>{d.value=!1,l.value=!0});const i=u=>{l.value=!1,n("load",u)},s=u=>{d.value=!0,l.value=!1,n("error",u)},g=(u,b,x)=>x?x():t(z,{name:u,size:e.iconSize,class:b,classPrefix:e.iconPrefix},null),a=()=>{if(l.value&&e.showLoading)return t("div",{class:C("loading")},[g(e.loadingIcon,C("loading-icon"),o.loading)]);if(d.value&&e.showError)return t("div",{class:C("error")},[g(e.errorIcon,C("error-icon"),o.error)])},m=()=>{if(d.value||!e.src)return;const u={alt:e.alt,class:C("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?ne(t("img",O({ref:c},u),null),[[se("lazy"),e.src]]):t("img",O({src:e.src,onLoad:i,onError:s},u),null)},h=({el:u})=>{const b=()=>{u===c.value&&l.value&&i()};c.value?b():ue(b)},k=({el:u})=>{u===c.value&&!d.value&&s()};return f&&le&&(f.$on("loaded",h),f.$on("error",k),de(()=>{f.$off("loaded",h),f.$off("error",k)})),()=>{var u;return t("div",{class:C({round:e.round}),style:r.value},[m(),a(),(u=o.default)==null?void 0:u.call(o)])}}});const Re=p(Ge),[Ee,v]=B("card"),Ae={tag:String,num:y,desc:String,thumb:String,title:String,price:y,centered:Boolean,lazyLoad:Boolean,currency:$("\xA5"),thumbLink:String,originPrice:y};var De=S({name:Ee,props:Ae,emits:["click-thumb"],setup(e,{slots:n,emit:o}){const d=()=>{if(n.title)return n.title();if(e.title)return t("div",{class:[v("title"),"van-multi-ellipsis--l2"]},[e.title])},l=()=>{if(n.tag||e.tag)return t("div",{class:v("tag")},[n.tag?n.tag():t(Ie,{mark:!0,type:"danger"},{default:()=>[e.tag]})])},c=()=>n.thumb?n.thumb():t(Re,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),f=()=>{if(n.thumb||e.thumb)return t("a",{href:e.thumbLink,class:v("thumb"),onClick:s=>o("click-thumb",s)},[c(),l()])},r=()=>{if(n.desc)return n.desc();if(e.desc)return t("div",{class:[v("desc"),"van-ellipsis"]},[e.desc])},i=()=>{const s=e.price.toString().split(".");return t("div",null,[t("span",{class:v("price-currency")},[e.currency]),t("span",{class:v("price-integer")},[s[0]]),me("."),t("span",{class:v("price-decimal")},[s[1]])])};return()=>{var s,g,a;const m=n.num||L(e.num),h=n.price||L(e.price),k=n["origin-price"]||L(e.originPrice),u=m||h||k||n.bottom,b=h&&t("div",{class:v("price")},[n.price?n.price():i()]),x=k&&t("div",{class:v("origin-price")},[n["origin-price"]?n["origin-price"]():`${e.currency} ${e.originPrice}`]),P=m&&t("div",{class:v("num")},[n.num?n.num():`x${e.num}`]),A=n.footer&&t("div",{class:v("footer")},[n.footer()]),G=u&&t("div",{class:v("bottom")},[(s=n["price-top"])==null?void 0:s.call(n),b,x,P,(g=n.bottom)==null?void 0:g.call(n)]);return t("div",{class:v()},[t("div",{class:v("header")},[f(),t("div",{class:v("content",{centered:e.centered})},[t("div",null,[d(),r(),(a=n.tags)==null?void 0:a.call(n)]),G])]),A])}}});const j=p(De),[re,Ne]=B("checkbox-group"),Oe={max:y,disabled:Boolean,iconSize:y,direction:String,modelValue:fe(),checkedColor:String},ie=Symbol(re);var Fe=S({name:re,props:Oe,emits:["change","update:modelValue"],setup(e,{emit:n,slots:o}){const{children:d,linkChildren:l}=be(ie),c=r=>n("update:modelValue",r),f=(r={})=>{typeof r=="boolean"&&(r={checked:r});const{checked:i,skipDisabled:s}=r,a=d.filter(m=>m.props.bindGroup?m.props.disabled&&s?m.checked.value:i!=null?i:!m.checked.value:!1).map(m=>m.name);c(a)};return E(()=>e.modelValue,r=>n("change",r)),K({toggleAll:f}),te(()=>e.modelValue),l({props:e,updateValue:c}),()=>{var r;return t("div",{class:Ne([e.direction])},[(r=o.default)==null?void 0:r.call(o)])}}});const[je,qe]=B("checkbox"),Ue=ee({},ae,{bindGroup:V});var We=S({name:je,props:Ue,emits:["change","update:modelValue"],setup(e,{emit:n,slots:o}){const{parent:d}=ge(ie),l=r=>{const{name:i}=e,{max:s,modelValue:g}=d.props,a=g.slice();if(r)!(s&&a.length>=s)&&!a.includes(i)&&(a.push(i),e.bindGroup&&d.updateValue(a));else{const m=a.indexOf(i);m!==-1&&(a.splice(m,1),e.bindGroup&&d.updateValue(a))}},c=I(()=>d&&e.bindGroup?d.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),f=(r=!c.value)=>{d&&e.bindGroup?l(r):n("update:modelValue",r)};return E(()=>e.modelValue,r=>n("change",r)),K({toggle:f,props:e,checked:c}),te(()=>e.modelValue),()=>t(Le,O({bem:qe,role:"checkbox",parent:d,checked:c.value,onToggle:f},e),he(o,["default","icon"]))}});const q=p(We),U=p(Fe),[Me,T]=B("notice-bar"),Ke={text:String,mode:String,color:String,delay:F(1),speed:F(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var Xe=S({name:Me,props:Ke,emits:["close","replay"],setup(e,{emit:n,slots:o}){let d=0,l=0,c;const f=w(),r=w(),i=ve({show:!0,offset:0,duration:0}),s=()=>{if(o["left-icon"])return o["left-icon"]();if(e.leftIcon)return t(z,{class:T("left-icon"),name:e.leftIcon},null)},g=()=>{if(e.mode==="closeable")return"cross";if(e.mode==="link")return"arrow"},a=b=>{e.mode==="closeable"&&(i.show=!1,n("close",b))},m=()=>{if(o["right-icon"])return o["right-icon"]();const b=g();if(b)return t(z,{name:b,class:T("right-icon"),onClick:a},null)},h=()=>{i.offset=d,i.duration=0,Se(()=>{J(()=>{i.offset=-l,i.duration=(l+d)/+e.speed,n("replay")})})},k=()=>{const b=e.scrollable===!1&&!e.wrapable,x={transform:i.offset?`translateX(${i.offset}px)`:"",transitionDuration:`${i.duration}s`};return t("div",{ref:f,role:"marquee",class:T("wrap")},[t("div",{ref:r,style:x,class:[T("content"),{"van-ellipsis":b}],onTransitionend:h},[o.default?o.default():e.text])])},u=()=>{const{delay:b,speed:x,scrollable:P}=e,A=L(b)?+b*1e3:0;d=0,l=0,i.offset=0,i.duration=0,clearTimeout(c),c=setTimeout(()=>{if(!f.value||!r.value||P===!1)return;const G=H(f).width,X=H(r).width;(P||X>G)&&J(()=>{d=G,l=X,i.offset=-l,i.duration=l/+x})},A)};return ke(u),xe(u),_e("pageshow",u),K({reset:u}),E(()=>[e.text,e.scrollable],u),()=>{const{color:b,wrapable:x,background:P}=e;return ne(t("div",{role:"alert",class:T({wrapable:x}),style:{color:b,background:P}},[s(),k(),m()]),[[ye,i.show]])}}});const W=p(Xe),[Ye,_,He]=B("submit-bar"),Je={tip:String,label:String,price:Number,tipIcon:String,loading:Boolean,currency:$("\xA5"),disabled:Boolean,textAlign:String,buttonText:String,buttonType:$("danger"),buttonColor:String,suffixLabel:String,decimalLength:F(2),safeAreaInsetBottom:V};var Qe=S({name:Ye,props:Je,emits:["submit"],setup(e,{emit:n,slots:o}){const d=()=>{const{price:r,label:i,currency:s,textAlign:g,suffixLabel:a,decimalLength:m}=e;if(typeof r=="number"){const h=(r/100).toFixed(+m).split("."),k=m?`.${h[1]}`:"";return t("div",{class:_("text"),style:{textAlign:g}},[t("span",null,[i||He("label")]),t("span",{class:_("price")},[s,t("span",{class:_("price-integer")},[h[0]]),k]),a&&t("span",{class:_("suffix-label")},[a])])}},l=()=>{var r;const{tip:i,tipIcon:s}=e;if(o.tip||i)return t("div",{class:_("tip")},[s&&t(z,{class:_("tip-icon"),name:s},null),i&&t("span",{class:_("tip-text")},[i]),(r=o.tip)==null?void 0:r.call(o)])},c=()=>n("submit"),f=()=>o.button?o.button():t(Te,{round:!0,type:e.buttonType,text:e.buttonText,class:_("button",e.buttonType),color:e.buttonColor,loading:e.loading,disabled:e.disabled,onClick:c},null);return()=>{var r,i;return t("div",{class:[_(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(r=o.top)==null?void 0:r.call(o),l(),t("div",{class:_("bar")},[(i=o.default)==null?void 0:i.call(o),d(),f()])])}}});const M=p(Qe);const Ze={components:{[W.name]:W,[j.name]:j,[q.name]:q,[M.name]:M,[U.name]:U},data(){return{checkedGoods:["2"],goods:[{id:"1",title:"\u8FDB\u53E3\u9999\u8549",desc:"\u7EA6250g\uFF0C2\u6839",price:200,num:1,thumb:D+"/images/banana.jpeg"},{id:"2",title:"\u9655\u897F\u871C\u68A8",desc:"\u7EA6600g",price:690,num:1,thumb:D+"/images/sydney.jpeg"},{id:"3",title:"\u7F8E\u56FD\u4F3D\u529B\u679C",desc:"\u7EA6680g/3\u4E2A",price:2680,num:1,thumb:D+"/images/apple1.jpeg"}]}},created(){console.log("Cart created")},mounted(){this.$toast.loading({message:"\u6A21\u62DF\u52A0\u8F7D\u4E2D...",forbidClick:!0,duration:1e3})},activated(){console.log("Cart activated")},computed:{submitBarText(){const e=this.checkedGoods.length;return"\u7ED3\u7B97"+(e?`(${e})`:"")},totalPrice(){return this.goods.reduce((e,n)=>e+(this.checkedGoods.indexOf(n.id)!==-1?n.price:0),0)}},methods:{formatPrice(e){return(e/100).toFixed(2)},onSubmit(){Ce("\u70B9\u51FB\u7ED3\u7B97")}}};function en(e,n,o,d,l,c){const f=W,r=j,i=q,s=U,g=M;return N(),Q("div",null,[t(f,{"left-icon":"volume-o",wrapable:"",text:"tips: \u5546\u54C1\u8BE6\u60C5\u9875id\u53D1\u751F\u53D8\u5316\u65F6\u6216\u624B\u52A8\u9500\u6BC1\u65F6\u624D\u56DE\u91CD\u65B0\u52A0\u8F7D\uFF0C\u70B9\u51FB\u4E00\u4E0B\u8BD5\u8BD5\u5427",onClick:n[0]||(n[0]=a=>e.$router.jump({type:"forward",constCache:!0}))}),t(s,{class:"card-goods",modelValue:l.checkedGoods,"onUpdate:modelValue":n[1]||(n[1]=a=>l.checkedGoods=a)},{default:Z(()=>[(N(!0),Q(we,null,$e(l.goods,a=>(N(),Be(i,{class:"card-goods__item",key:a.id,name:a.id},{default:Z(()=>[t(r,{title:a.title,desc:a.desc,num:a.num,price:c.formatPrice(a.price),thumb:a.thumb,onClick:pe(m=>e.$router.push({name:"goods",query:{id:a.id}}),["stop"])},null,8,["title","desc","num","price","thumb","onClick"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),t(g,{price:c.totalPrice,disabled:!l.checkedGoods.length,"button-text":c.submitBarText,onSubmit:c.onSubmit},null,8,["price","disabled","button-text","onSubmit"])])}var rn=Pe(Ze,[["render",en],["__scopeId","data-v-0dfc450b"]]);export{rn as default};
//# sourceMappingURL=index.f9e9daae.js.map
