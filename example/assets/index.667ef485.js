import{g as j,h as R,s as he,a as s,t as E,w as M,i as me,j as pe,u as _e,y as W,v as _,N as K,n as X,k as Ee,q as je,a7 as Re,I as H,A as Me,R as be,a8 as Oe,E as z,a9 as De,aa as Le,ab as Ne,ac as we,ad as Ye,S as Ge,ae as qe,J as Fe,x as G,af as ne,M as ye,a5 as Ve,Y as D,ag as q,_ as Xe,$ as L,a0 as He,r as $,o as F,c as oe,b as r,F as We,a1 as Ke,e as S,ah as se,f as y,a2 as Ue}from"./index.030cb4c6.js";import{T as ie}from"./index.b1330acd.js";import{C as ce,a as le,b as re}from"./index.12558f74.js";import{B as Je}from"./index.0cef0493.js";const[Ce,Qe]=j("action-bar"),U=Symbol(Ce),Ze={safeAreaInsetBottom:E};var et=R({name:Ce,props:Ze,setup(e,{slots:n}){const{linkChildren:f}=he(U);return f(),()=>{var l;return s("div",{class:[Qe(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(l=n.default)==null?void 0:l.call(n)])}}});const ue=M(et),[tt,at]=j("action-bar-button"),nt=me({},pe,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var ot=R({name:tt,props:nt,setup(e,{slots:n}){const f=_e(),{parent:l,index:t}=W(U),c=_(()=>{if(l){const h=l.children[t.value-1];return!(h&&"isButton"in h)}}),m=_(()=>{if(l){const h=l.children[t.value+1];return!(h&&"isButton"in h)}});return K({isButton:!0}),()=>{const{type:h,icon:o,text:i,color:u,loading:v,disabled:C}=e;return s(Je,{class:at([h,{last:m.value,first:c.value}]),size:"large",type:h,icon:o,color:u,loading:v,disabled:C,onClick:f},{default:()=>[n.default?n.default():i]})}}});const de=M(ot),[st,V]=j("action-bar-icon"),it=me({},pe,{dot:Boolean,text:String,icon:String,color:String,badge:X,iconClass:Ee,badgeProps:Object,iconPrefix:String});var ct=R({name:st,props:it,setup(e,{slots:n}){const f=_e();W(U);const l=()=>{const{dot:t,badge:c,icon:m,color:h,iconClass:o,badgeProps:i,iconPrefix:u}=e;return n.icon?s(Re,je({dot:t,class:V("icon"),content:c},i),{default:n.icon}):s(H,{tag:"div",dot:t,name:m,badge:c,color:h,class:[V("icon"),o],badgeProps:i,classPrefix:u},null)};return()=>s("div",{role:"button",class:V(),tabindex:0,onClick:f},[l(),n.default?n.default():e.text])}});const ve=M(ct),[$e,N]=j("swipe"),lt={loop:E,width:X,height:X,vertical:Boolean,autoplay:G(0),duration:G(500),touchable:E,lazyRender:Boolean,initialSwipe:G(0),indicatorColor:String,showIndicators:E,stopPropagation:E},ke=Symbol($e);var rt=R({name:$e,props:lt,emits:["change"],setup(e,{emit:n,slots:f}){const l=Me(),t=be({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),c=Oe(),{children:m,linkChildren:h}=he(ke),o=_(()=>m.length),i=_(()=>t[e.vertical?"height":"width"]),u=_(()=>e.vertical?c.deltaY.value:c.deltaX.value),v=_(()=>t.rect?(e.vertical?t.rect.height:t.rect.width)-i.value*o.value:0),C=_(()=>Math.ceil(Math.abs(v.value)/i.value)),k=_(()=>o.value*i.value),x=_(()=>(t.active+o.value)%o.value),b=_(()=>{const a=e.vertical?"vertical":"horizontal";return c.direction.value===a}),xe=_(()=>{const a={transitionDuration:`${t.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${t.offset}px)`};if(i.value){const g=e.vertical?"height":"width",d=e.vertical?"width":"height";a[g]=`${k.value}px`,a[d]=e[d]?`${e[d]}px`:""}return a}),Be=a=>{const{active:g}=t;return a?e.loop?q(g+a,-1,o.value):q(g+a,0,C.value):g},J=(a,g=0)=>{let d=a*i.value;e.loop||(d=Math.min(d,-v.value));let w=g-d;return e.loop||(w=q(w,v.value,0)),w},B=({pace:a=0,offset:g=0,emitChange:d})=>{if(o.value<=1)return;const{active:w}=t,p=Be(a),I=J(p,g);if(e.loop){if(m[0]&&I!==v.value){const Y=I<v.value;m[0].setOffset(Y?k.value:0)}if(m[o.value-1]&&I!==0){const Y=I>0;m[o.value-1].setOffset(Y?-k.value:0)}}t.active=p,t.offset=I,d&&p!==w&&n("change",x.value)},O=()=>{t.swiping=!0,t.active<=-1?B({pace:o.value}):t.active>=o.value&&B({pace:-o.value})},Pe=()=>{O(),c.reset(),D(()=>{t.swiping=!1,B({pace:-1,emitChange:!0})})},Q=()=>{O(),c.reset(),D(()=>{t.swiping=!1,B({pace:1,emitChange:!0})})};let Z;const T=()=>clearTimeout(Z),A=()=>{T(),e.autoplay>0&&o.value>1&&(Z=setTimeout(()=>{Q(),A()},+e.autoplay))},P=(a=+e.initialSwipe)=>{if(!l.value)return;const g=()=>{var d,w;if(!ne(l)){const p={width:l.value.offsetWidth,height:l.value.offsetHeight};t.rect=p,t.width=+((d=e.width)!=null?d:p.width),t.height=+((w=e.height)!=null?w:p.height)}o.value&&(a=Math.min(o.value-1,a)),t.active=a,t.swiping=!0,t.offset=J(a),m.forEach(p=>{p.setOffset(0)}),A()};ne(l)?ye().then(g):g()},ee=()=>P(t.active);let te;const Se=a=>{!e.touchable||(c.start(a),te=Date.now(),T(),O())},Te=a=>{e.touchable&&t.swiping&&(c.move(a),b.value&&(Ve(a,e.stopPropagation),B({offset:u.value})))},ae=()=>{if(!e.touchable||!t.swiping)return;const a=Date.now()-te,g=u.value/a;if((Math.abs(g)>.25||Math.abs(u.value)>i.value/2)&&b.value){const w=e.vertical?c.offsetY.value:c.offsetX.value;let p=0;e.loop?p=w>0?u.value>0?-1:1:0:p=-Math[u.value>0?"ceil":"floor"](u.value/i.value),B({pace:p,emitChange:!0})}else u.value&&B({pace:0});t.swiping=!1,A()},Ae=(a,g={})=>{O(),c.reset(),D(()=>{let d;e.loop&&a===o.value?d=t.active===0?0:a:d=a%o.value,g.immediate?D(()=>{t.swiping=!1}):t.swiping=!1,B({pace:d-t.active,emitChange:!0})})},Ie=(a,g)=>{const d=g===x.value,w=d?{backgroundColor:e.indicatorColor}:void 0;return s("i",{style:w,class:N("indicator",{active:d})},null)},ze=()=>{if(f.indicator)return f.indicator({active:x.value,total:o.value});if(e.showIndicators&&o.value>1)return s("div",{class:N("indicators",{vertical:e.vertical})},[Array(o.value).fill("").map(Ie)])};return K({prev:Pe,next:Q,state:t,resize:ee,swipeTo:Ae}),h({size:i,props:e,count:o,activeIndicator:x}),z(()=>e.initialSwipe,a=>P(+a)),z(o,()=>P(t.active)),z(()=>e.autoplay,A),z([De,Le],ee),z(Ne(),a=>{a==="visible"?A():T()}),we(P),Ye(()=>P(t.active)),Ge(()=>P(t.active)),qe(T),Fe(T),()=>{var a;return s("div",{ref:l,class:N()},[s("div",{style:xe.value,class:N("track",{vertical:e.vertical}),onTouchstart:Se,onTouchmove:Te,onTouchend:ae,onTouchcancel:ae},[(a=f.default)==null?void 0:a.call(f)]),ze()])}}});const fe=M(rt),[ut,dt]=j("swipe-item");var vt=R({name:ut,setup(e,{slots:n}){let f;const l=be({offset:0,inited:!1,mounted:!1}),{parent:t,index:c}=W(ke);if(!t)return;const m=_(()=>{const i={},{vertical:u}=t.props;return t.size.value&&(i[u?"height":"width"]=`${t.size.value}px`),l.offset&&(i.transform=`translate${u?"Y":"X"}(${l.offset}px)`),i}),h=_(()=>{const{loop:i,lazyRender:u}=t.props;if(!u||f)return!0;if(!l.mounted)return!1;const v=t.activeIndicator.value,C=t.count.value-1,k=v===0&&i?C:v-1,x=v===C&&i?0:v+1;return f=c.value===v||c.value===k||c.value===x,f}),o=i=>{l.offset=i};return we(()=>{ye(()=>{l.mounted=!0})}),K({setOffset:o}),()=>{var i;return s("div",{class:dt(),style:m.value},[h.value?(i=n.default)==null?void 0:i.call(n):null])}}});const ge=M(vt);const ft={components:{[ie.name]:ie,[ce.name]:ce,[H.name]:H,[le.name]:le,[re.name]:re,[fe.name]:fe,[ge.name]:ge,[ue.name]:ue,[ve.name]:ve,[de.name]:de},data(){return{goodsList:[{id:"1",title:"\u8FDB\u53E3\u9999\u8549",desc:"\u7EA6250g\uFF0C2\u6839",price:200,express:"8.00",num:1,thumb:[L+"/images/banana.jpeg"]},{id:"2",title:"\u9655\u897F\u871C\u68A8",desc:"\u7EA6600g",price:690,express:"10.00",num:1,thumb:[L+"/images/sydney.jpeg"]},{id:"3",title:"\u7F8E\u56FD\u4F3D\u529B\u679C",desc:"\u7EA6680g/3\u4E2A",price:2680,express:"\u514D\u8FD0\u8D39",num:1,thumb:[L+"/images/apple1.jpeg",L+"/images/apple2.jpeg"]}],goods:{title:"\u7F8E\u56FD\u4F3D\u529B\u679C\uFF08\u7EA6680g/3\u4E2A\uFF09",price:2680,express:"\u514D\u8FD0\u8D39",remain:19,thumb:["https://img.yzcdn.cn/public_files/2017/10/24/e5a5a02309a41f9f5def56684808d9ae.jpeg","https://img.yzcdn.cn/public_files/2017/10/24/1791ba14088f9c2be8c610d0a6cc0f93.jpeg"]}}},created(){console.log("Goods created"),this.getGoods();const{id:e}=this.$route.query;this.unBeforeEach=this.$keepRouter.beforeEach("goods",n=>{if(n.query.id!==e)return n.cache=!1;n.cache=!0})},mounted(){this.$toast.loading({message:"\u6A21\u62DF\u52A0\u8F7D\u4E2D...",forbidClick:!0,duration:1e3})},activated(){console.log("Goods activated")},beforeUnmount(){this.unBeforeEach()},methods:{addCart(){this.$toast.success({message:"\u6DFB\u52A0\u8D2D\u7269\u8F66\u6210\u529F\uFF0C\u9500\u6BC1\u8D2D\u7269\u8F66\u9875\u9762"}),this.$keepRouter.destroy("cart")},getGoods(){let{goodsList:e,$route:{query:n}}=this;this.goods=e.find(f=>f.id===n.id&&f)},formatPrice(){return"\xA5"+(this.goods.price/100).toFixed(2)},onClickCart(){this.$router.push("cart")},sorry(){He("\u6682\u65E0\u540E\u7EED\u903B\u8F91~")}}},gt={class:"goods"},ht=["src"],mt={class:"goods-title"},pt={class:"goods-price"},_t=y("\u8FD0\u8D39go(-1)\uFF1A\u8FD4\u56DE\u65F6\u4F7F\u7528\u7F13\u5B58"),bt=y("\u5269\u4F59back\uFF1A\u8FD4\u56DE\u65F6\u4F7F\u7528\u7F13\u5B58"),wt=S("span",{class:"van-cell-text"},"\u4E0D\u9500\u6BC1user\uFF0C\u8DF3\u8F6C\u56DEuser",-1),yt=y("\u70B9\u51FB"),Ct=S("span",{class:"van-cell-text"},"\u4E0D\u9500\u6BC1\u8D2D\u7269\u8F66\u9875\u9762\uFF0C\u8DF3\u8F6C\u56DE\u8D2D\u7269\u8F66",-1),$t=y("\u70B9\u51FB"),kt=S("span",{class:"van-cell-text"},"\u9500\u6BC1\u8D2D\u7269\u8F66\u9875\u9762\uFF0C\u8DF3\u8F6C\u56DE\u8D2D\u7269\u8F66",-1),xt=y("\u70B9\u51FB"),Bt=y("\u70B9\u51FB"),Pt=y(" \u5BA2\u670D "),St=y(" \u8D2D\u7269\u8F66 "),Tt=y(" \u52A0\u5165\u8D2D\u7269\u8F66 "),At=y("\u70B9\u51FB"),It=y(" \u7ACB\u5373\u8D2D\u4E70 ");function zt(e,n,f,l,t,c){const m=$("van-swipe-item"),h=$("van-swipe"),o=$("van-cell"),i=$("van-col"),u=$("van-cell-group"),v=$("van-tag"),C=$("van-action-bar-icon"),k=$("van-action-bar-button"),x=$("van-action-bar");return F(),oe("div",gt,[s(h,{class:"goods-swipe",autoplay:3e3,onClick:n[0]||(n[0]=b=>e.$router.push({name:"cart",cache:!0}))},{default:r(()=>[(F(!0),oe(We,null,Ke(t.goods.thumb,b=>(F(),Ue(m,{key:b},{default:r(()=>[S("img",{src:b},null,8,ht)]),_:2},1024))),128))]),_:1}),s(u,null,{default:r(()=>[s(o,null,{default:r(()=>[S("div",mt,se(t.goods.title),1),S("div",pt,se(c.formatPrice(t.goods.price)),1)]),_:1}),s(o,{class:"goods-express"},{default:r(()=>[s(i,{span:"24",onClick:n[1]||(n[1]=b=>e.$router.jump(-1,{cache:!0}))},{default:r(()=>[_t]),_:1}),s(i,{span:"24",onClick:n[2]||(n[2]=b=>e.$router.back({cache:!0}))},{default:r(()=>[bt]),_:1})]),_:1})]),_:1}),s(u,{class:"goods-cell-group"},{default:r(()=>[s(o,{value:"\u8FDB\u5165\u8D2D\u7269\u8F66",icon:"cart","is-link":"",onClick:n[3]||(n[3]=b=>e.$router.jump({type:"push",name:"user",cache:!0}))},{title:r(()=>[wt,s(v,{class:"goods-tag",type:"danger"},{default:r(()=>[yt]),_:1})]),_:1}),s(o,{value:"\u8FDB\u5165\u8D2D\u7269\u8F66",icon:"cart","is-link":"",onClick:n[4]||(n[4]=b=>e.$router.jump({type:"push",name:"cart",cache:!0}))},{title:r(()=>[Ct,s(v,{class:"goods-tag",type:"danger"},{default:r(()=>[$t]),_:1})]),_:1}),s(o,{title:"\u7EBF\u4E0B\u95E8\u5E97",icon:"cart","is-link":"",onClick:n[5]||(n[5]=b=>e.$router.push({name:"cart"}))},{title:r(()=>[kt,s(v,{class:"goods-tag",type:"danger"},{default:r(()=>[xt]),_:1})]),_:1})]),_:1}),s(u,{class:"goods-cell-group"},{default:r(()=>[s(o,{title:"\u56DE\u5230\u8D2D\u7269\u8F66\uFF0C\u9500\u6BC1\u5168\u90E8\u7F13\u5B58\u9875\u9762","is-link":"",onClick:n[6]||(n[6]=b=>e.$router.push({name:"cart",destroy:"ALL"}))},{default:r(()=>[s(v,{class:"goods-tag",type:"danger"},{default:r(()=>[Bt]),_:1})]),_:1})]),_:1}),s(x,null,{default:r(()=>[s(C,{icon:"chat-o",onClick:c.sorry},{default:r(()=>[Pt]),_:1},8,["onClick"]),s(C,{icon:"cart-o",onClick:c.onClickCart},{default:r(()=>[St]),_:1},8,["onClick"]),s(k,{type:"warning",onClick:c.addCart},{default:r(()=>[Tt,s(v,{class:"goods-tag",type:"danger"},{default:r(()=>[At]),_:1})]),_:1},8,["onClick"]),s(k,{type:"danger",onClick:c.sorry},{default:r(()=>[It]),_:1},8,["onClick"])]),_:1})])}var Ot=Xe(ft,[["render",zt]]);export{Ot as default};
//# sourceMappingURL=index.667ef485.js.map
