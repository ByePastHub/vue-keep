import{g as z,t as I,i as j,s as ge,a as s,w as E,h as he,r as me,j as pe,x as ae,v as _,N as oe,n as V,u as ze,m as je,a6 as Ee,I as X,q as N,z as Re,Q as _e,a7 as Oe,D as A,a8 as De,a9 as Me,aa as Le,ab as be,ac as Ne,R as Ye,ad as Ge,G as qe,ae as de,L as we,a4 as Fe,Y as O,af as Y,_ as Ve,Z as D,$ as Xe,o as G,c as fe,b as l,F as He,a0 as We,e as q,ag as ve,f as y,a1 as Ke}from"./index.0d5ca0db.js";import{B as Ue}from"./index.7d9b55e6.js";import{T as H}from"./index.0d9f17c7.js";import{C as W,a as K,b as U}from"./index.ae168cc0.js";const[ye,Qe]=z("action-bar"),ne=Symbol(ye),Ze={safeAreaInsetBottom:I};var Je=j({name:ye,props:Ze,setup(e,{slots:o}){const{linkChildren:v}=ge(ne);return v(),()=>{var r;return s("div",{class:[Qe(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(r=o.default)==null?void 0:r.call(o)])}}});const Q=E(Je),[et,tt]=z("action-bar-button"),at=he({},me,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var ot=j({name:et,props:at,setup(e,{slots:o}){const v=pe(),{parent:r,index:t}=ae(ne),c=_(()=>{if(r){const h=r.children[t.value-1];return!(h&&"isButton"in h)}}),m=_(()=>{if(r){const h=r.children[t.value+1];return!(h&&"isButton"in h)}});return oe({isButton:!0}),()=>{const{type:h,icon:n,text:i,color:u,loading:f,disabled:C}=e;return s(Ue,{class:tt([h,{last:m.value,first:c.value}]),size:"large",type:h,icon:n,color:u,loading:f,disabled:C,onClick:v},{default:()=>[o.default?o.default():i]})}}});const Z=E(ot),[nt,F]=z("action-bar-icon"),st=he({},me,{dot:Boolean,text:String,icon:String,color:String,badge:V,iconClass:ze,badgeProps:Object,iconPrefix:String});var it=j({name:nt,props:st,setup(e,{slots:o}){const v=pe();ae(ne);const r=()=>{const{dot:t,badge:c,icon:m,color:h,iconClass:n,badgeProps:i,iconPrefix:u}=e;return o.icon?s(Ee,je({dot:t,class:F("icon"),content:c},i),{default:o.icon}):s(X,{tag:"div",dot:t,name:m,badge:c,color:h,class:[F("icon"),n],badgeProps:i,classPrefix:u},null)};return()=>s("div",{role:"button",class:F(),tabindex:0,onClick:v},[r(),o.default?o.default():e.text])}});const J=E(it),[Ce,M]=z("swipe"),ct={loop:I,width:V,height:V,vertical:Boolean,autoplay:N(0),duration:N(500),touchable:I,lazyRender:Boolean,initialSwipe:N(0),indicatorColor:String,showIndicators:I,stopPropagation:I},$e=Symbol(Ce);var rt=j({name:Ce,props:ct,emits:["change"],setup(e,{emit:o,slots:v}){const r=Re(),t=_e({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),c=Oe(),{children:m,linkChildren:h}=ge($e),n=_(()=>m.length),i=_(()=>t[e.vertical?"height":"width"]),u=_(()=>e.vertical?c.deltaY.value:c.deltaX.value),f=_(()=>t.rect?(e.vertical?t.rect.height:t.rect.width)-i.value*n.value:0),C=_(()=>Math.ceil(Math.abs(f.value)/i.value)),$=_(()=>n.value*i.value),k=_(()=>(t.active+n.value)%n.value),b=_(()=>{const a=e.vertical?"vertical":"horizontal";return c.direction.value===a}),ke=_(()=>{const a={transitionDuration:`${t.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${t.offset}px)`};if(i.value){const g=e.vertical?"height":"width",d=e.vertical?"width":"height";a[g]=`${$.value}px`,a[d]=e[d]?`${e[d]}px`:""}return a}),xe=a=>{const{active:g}=t;return a?e.loop?Y(g+a,-1,n.value):Y(g+a,0,C.value):g},se=(a,g=0)=>{let d=a*i.value;e.loop||(d=Math.min(d,-f.value));let w=g-d;return e.loop||(w=Y(w,f.value,0)),w},x=({pace:a=0,offset:g=0,emitChange:d})=>{if(n.value<=1)return;const{active:w}=t,p=xe(a),T=se(p,g);if(e.loop){if(m[0]&&T!==f.value){const L=T<f.value;m[0].setOffset(L?$.value:0)}if(m[n.value-1]&&T!==0){const L=T>0;m[n.value-1].setOffset(L?-$.value:0)}}t.active=p,t.offset=T,d&&p!==w&&o("change",k.value)},R=()=>{t.swiping=!0,t.active<=-1?x({pace:n.value}):t.active>=n.value&&x({pace:-n.value})},Be=()=>{R(),c.reset(),O(()=>{t.swiping=!1,x({pace:-1,emitChange:!0})})},ie=()=>{R(),c.reset(),O(()=>{t.swiping=!1,x({pace:1,emitChange:!0})})};let ce;const P=()=>clearTimeout(ce),S=()=>{P(),e.autoplay>0&&n.value>1&&(ce=setTimeout(()=>{ie(),S()},+e.autoplay))},B=(a=+e.initialSwipe)=>{if(!r.value)return;const g=()=>{var d,w;if(!de(r)){const p={width:r.value.offsetWidth,height:r.value.offsetHeight};t.rect=p,t.width=+((d=e.width)!=null?d:p.width),t.height=+((w=e.height)!=null?w:p.height)}n.value&&(a=Math.min(n.value-1,a)),t.active=a,t.swiping=!0,t.offset=se(a),m.forEach(p=>{p.setOffset(0)}),S()};de(r)?we().then(g):g()},re=()=>B(t.active);let le;const Pe=a=>{!e.touchable||(c.start(a),le=Date.now(),P(),R())},Se=a=>{e.touchable&&t.swiping&&(c.move(a),b.value&&(Fe(a,e.stopPropagation),x({offset:u.value})))},ue=()=>{if(!e.touchable||!t.swiping)return;const a=Date.now()-le,g=u.value/a;if((Math.abs(g)>.25||Math.abs(u.value)>i.value/2)&&b.value){const w=e.vertical?c.offsetY.value:c.offsetX.value;let p=0;e.loop?p=w>0?u.value>0?-1:1:0:p=-Math[u.value>0?"ceil":"floor"](u.value/i.value),x({pace:p,emitChange:!0})}else u.value&&x({pace:0});t.swiping=!1,S()},Te=(a,g={})=>{R(),c.reset(),O(()=>{let d;e.loop&&a===n.value?d=t.active===0?0:a:d=a%n.value,g.immediate?O(()=>{t.swiping=!1}):t.swiping=!1,x({pace:d-t.active,emitChange:!0})})},Ae=(a,g)=>{const d=g===k.value,w=d?{backgroundColor:e.indicatorColor}:void 0;return s("i",{style:w,class:M("indicator",{active:d})},null)},Ie=()=>{if(v.indicator)return v.indicator({active:k.value,total:n.value});if(e.showIndicators&&n.value>1)return s("div",{class:M("indicators",{vertical:e.vertical})},[Array(n.value).fill("").map(Ae)])};return oe({prev:Be,next:ie,state:t,resize:re,swipeTo:Te}),h({size:i,props:e,count:n,activeIndicator:k}),A(()=>e.initialSwipe,a=>B(+a)),A(n,()=>B(t.active)),A(()=>e.autoplay,S),A([De,Me],re),A(Le(),a=>{a==="visible"?S():P()}),be(B),Ne(()=>B(t.active)),Ye(()=>B(t.active)),Ge(P),qe(P),()=>{var a;return s("div",{ref:r,class:M()},[s("div",{style:ke.value,class:M("track",{vertical:e.vertical}),onTouchstart:Pe,onTouchmove:Se,onTouchend:ue,onTouchcancel:ue},[(a=v.default)==null?void 0:a.call(v)]),Ie()])}}});const ee=E(rt),[lt,ut]=z("swipe-item");var dt=j({name:lt,setup(e,{slots:o}){let v;const r=_e({offset:0,inited:!1,mounted:!1}),{parent:t,index:c}=ae($e);if(!t)return;const m=_(()=>{const i={},{vertical:u}=t.props;return t.size.value&&(i[u?"height":"width"]=`${t.size.value}px`),r.offset&&(i.transform=`translate${u?"Y":"X"}(${r.offset}px)`),i}),h=_(()=>{const{loop:i,lazyRender:u}=t.props;if(!u||v)return!0;if(!r.mounted)return!1;const f=t.activeIndicator.value,C=t.count.value-1,$=f===0&&i?C:f-1,k=f===C&&i?0:f+1;return v=c.value===f||c.value===$||c.value===k,v}),n=i=>{r.offset=i};return be(()=>{we(()=>{r.mounted=!0})}),oe({setOffset:n}),()=>{var i;return s("div",{class:ut(),style:m.value},[h.value?(i=o.default)==null?void 0:i.call(o):null])}}});const te=E(dt);const ft={components:{[H.name]:H,[W.name]:W,[X.name]:X,[K.name]:K,[U.name]:U,[ee.name]:ee,[te.name]:te,[Q.name]:Q,[J.name]:J,[Z.name]:Z},data(){return{goodsList:[{id:"1",title:"\u8FDB\u53E3\u9999\u8549",desc:"\u7EA6250g\uFF0C2\u6839",price:200,express:"8.00",num:1,thumb:[D+"/images/banana.jpeg"]},{id:"2",title:"\u9655\u897F\u871C\u68A8",desc:"\u7EA6600g",price:690,express:"10.00",num:1,thumb:[D+"/images/sydney.jpeg"]},{id:"3",title:"\u7F8E\u56FD\u4F3D\u529B\u679C",desc:"\u7EA6680g/3\u4E2A",price:2680,express:"\u514D\u8FD0\u8D39",num:1,thumb:[D+"/images/apple1.jpeg",D+"/images/apple2.jpeg"]}],goods:{title:"\u7F8E\u56FD\u4F3D\u529B\u679C\uFF08\u7EA6680g/3\u4E2A\uFF09",price:2680,express:"\u514D\u8FD0\u8D39",remain:19,thumb:["https://img.yzcdn.cn/public_files/2017/10/24/e5a5a02309a41f9f5def56684808d9ae.jpeg","https://img.yzcdn.cn/public_files/2017/10/24/1791ba14088f9c2be8c610d0a6cc0f93.jpeg"]}}},created(){console.log("Goods created"),this.getGoods();const{id:e}=this.$route.query;this.unBeforeEach=this.$keepRouter.beforeEach("goods",o=>{if(o.query.id!==e)return o.cache=!1;o.cache=!0})},mounted(){this.$toast.loading({message:"\u6A21\u62DF\u52A0\u8F7D\u4E2D...",forbidClick:!0,duration:1e3})},activated(){console.log("Goods activated")},beforeUnmount(){this.unBeforeEach()},methods:{addCart(){this.$toast.success({message:"\u6DFB\u52A0\u8D2D\u7269\u8F66\u6210\u529F\uFF0C\u9500\u6BC1\u8D2D\u7269\u8F66\u9875\u9762"}),this.$keepRouter.destroy("cart")},getGoods(){let{goodsList:e,$route:{query:o}}=this;this.goods=e.find(v=>v.id===o.id&&v)},formatPrice(){return"\xA5"+(this.goods.price/100).toFixed(2)},onClickCart(){this.$router.push("cart")},sorry(){Xe("\u6682\u65E0\u540E\u7EED\u903B\u8F91~")}}},vt={class:"goods"},gt=["src"],ht={class:"goods-title"},mt={class:"goods-price"},pt=y("\u8FD0\u8D39go(-1)\uFF1A\u8FD4\u56DE\u65F6\u4F7F\u7528\u7F13\u5B58"),_t=y("\u5269\u4F59back\uFF1A\u8FD4\u56DE\u65F6\u4F7F\u7528\u7F13\u5B58"),bt=y("\u70B9\u51FB"),wt=y("\u70B9\u51FB"),yt=y("\u70B9\u51FB"),Ct=y("\u70B9\u51FB"),$t=y(" \u5BA2\u670D "),kt=y(" \u8D2D\u7269\u8F66 "),xt=y(" \u52A0\u5165\u8D2D\u7269\u8F66 "),Bt=y("\u70B9\u51FB"),Pt=y(" \u7ACB\u5373\u8D2D\u4E70 ");function St(e,o,v,r,t,c){const m=te,h=ee,n=K,i=W,u=U,f=H,C=J,$=Z,k=Q;return G(),fe("div",vt,[s(h,{class:"goods-swipe",autoplay:3e3,onClick:o[0]||(o[0]=b=>e.$router.push({name:"cart",cache:!0}))},{default:l(()=>[(G(!0),fe(He,null,We(t.goods.thumb,b=>(G(),Ke(m,{key:b},{default:l(()=>[q("img",{src:b},null,8,gt)]),_:2},1024))),128))]),_:1}),s(u,null,{default:l(()=>[s(n,null,{default:l(()=>[q("div",ht,ve(t.goods.title),1),q("div",mt,ve(c.formatPrice(t.goods.price)),1)]),_:1}),s(n,{class:"goods-express"},{default:l(()=>[s(i,{span:"24",onClick:o[1]||(o[1]=b=>e.$router.jump(-1,{cache:!0}))},{default:l(()=>[pt]),_:1}),s(i,{span:"24",onClick:o[2]||(o[2]=b=>e.$router.back({cache:!0}))},{default:l(()=>[_t]),_:1})]),_:1})]),_:1}),s(u,{class:"goods-cell-group"},{default:l(()=>[s(n,{title:"\u4E0D\u9500\u6BC1\u8D2D\u7269\u8F66\u9875\u9762\uFF0C\u8DF3\u8F6C\u56DE\u8D2D\u7269\u8F66",icon:"cart","is-link":"",onClick:o[3]||(o[3]=b=>e.$router.jump({type:"push",name:"cart",cache:!0}))},{default:l(()=>[s(f,{class:"goods-tag",type:"danger"},{default:l(()=>[bt]),_:1})]),_:1}),s(n,{title:"\u9500\u6BC1\u8D2D\u7269\u8F66\u9875\u9762\uFF0C\u8DF3\u8F6C\u56DE\u8D2D\u7269\u8F66",icon:"cart","is-link":"",onClick:o[4]||(o[4]=b=>e.$router.push({name:"cart"}))},{default:l(()=>[s(f,{class:"goods-tag",type:"danger"},{default:l(()=>[wt]),_:1})]),_:1}),s(n,{title:"\u4E0D\u9500\u6BC1user\uFF0C\u8DF3\u8F6C\u56DEuser",icon:"manager","is-link":"",onClick:o[5]||(o[5]=b=>e.$router.jump({type:"push",name:"user",cache:!0}))},{default:l(()=>[s(f,{class:"goods-tag",type:"danger"},{default:l(()=>[yt]),_:1})]),_:1})]),_:1}),s(u,{class:"goods-cell-group"},{default:l(()=>[s(n,{title:"\u56DE\u5230\u8D2D\u7269\u8F66\uFF0C\u9500\u6BC1\u5168\u90E8\u7F13\u5B58\u9875\u9762","is-link":"",onClick:o[6]||(o[6]=b=>e.$router.push({name:"cart",destroy:"ALL"}))},{default:l(()=>[s(f,{class:"goods-tag",type:"danger"},{default:l(()=>[Ct]),_:1})]),_:1})]),_:1}),s(k,null,{default:l(()=>[s(C,{icon:"chat-o",onClick:c.sorry},{default:l(()=>[$t]),_:1},8,["onClick"]),s(C,{icon:"cart-o",onClick:c.onClickCart},{default:l(()=>[kt]),_:1},8,["onClick"]),s($,{type:"warning",onClick:c.addCart},{default:l(()=>[xt,s(f,{class:"goods-tag",type:"danger"},{default:l(()=>[Bt]),_:1})]),_:1},8,["onClick"]),s($,{type:"danger",onClick:c.sorry},{default:l(()=>[Pt]),_:1},8,["onClick"])]),_:1})])}var jt=Ve(ft,[["render",St]]);export{jt as default};
//# sourceMappingURL=index.3a4e9411.js.map
