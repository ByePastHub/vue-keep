import{g as j,h as R,s as he,a as s,t as E,w as M,i as me,j as pe,u as _e,y as K,v as _,N as U,n as H,k as Ee,q as je,a7 as Re,I as W,A as Me,R as be,a8 as Oe,E as z,a9 as De,aa as Le,ab as Ne,ac as we,ad as Ye,S as Ge,ae as qe,J as Fe,x as q,af as oe,M as ye,a5 as Ve,Y as D,ag as F,_ as Xe,$ as L,a0 as He,r as k,o as V,c as se,b as l,F as We,a1 as Ke,e as S,ah as N,f as y,a2 as Ue}from"./index.67b0cbad.js";import{T as ie}from"./index.245301d4.js";import{C as ce,a as re,b as le}from"./index.1404a031.js";import{B as Je}from"./index.8c20443b.js";const[Ce,Qe]=j("action-bar"),J=Symbol(Ce),Ze={safeAreaInsetBottom:E};var et=R({name:Ce,props:Ze,setup(t,{slots:n}){const{linkChildren:f}=he(J);return f(),()=>{var r;return s("div",{class:[Qe(),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[(r=n.default)==null?void 0:r.call(n)])}}});const ue=M(et),[tt,at]=j("action-bar-button"),nt=me({},pe,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var ot=R({name:tt,props:nt,setup(t,{slots:n}){const f=_e(),{parent:r,index:e}=K(J),c=_(()=>{if(r){const h=r.children[e.value-1];return!(h&&"isButton"in h)}}),m=_(()=>{if(r){const h=r.children[e.value+1];return!(h&&"isButton"in h)}});return U({isButton:!0}),()=>{const{type:h,icon:o,text:i,color:u,loading:v,disabled:C}=t;return s(Je,{class:at([h,{last:m.value,first:c.value}]),size:"large",type:h,icon:o,color:u,loading:v,disabled:C,onClick:f},{default:()=>[n.default?n.default():i]})}}});const de=M(ot),[st,X]=j("action-bar-icon"),it=me({},pe,{dot:Boolean,text:String,icon:String,color:String,badge:H,iconClass:Ee,badgeProps:Object,iconPrefix:String});var ct=R({name:st,props:it,setup(t,{slots:n}){const f=_e();K(J);const r=()=>{const{dot:e,badge:c,icon:m,color:h,iconClass:o,badgeProps:i,iconPrefix:u}=t;return n.icon?s(Re,je({dot:e,class:X("icon"),content:c},i),{default:n.icon}):s(W,{tag:"div",dot:e,name:m,badge:c,color:h,class:[X("icon"),o],badgeProps:i,classPrefix:u},null)};return()=>s("div",{role:"button",class:X(),tabindex:0,onClick:f},[r(),n.default?n.default():t.text])}});const ve=M(ct),[ke,Y]=j("swipe"),rt={loop:E,width:H,height:H,vertical:Boolean,autoplay:q(0),duration:q(500),touchable:E,lazyRender:Boolean,initialSwipe:q(0),indicatorColor:String,showIndicators:E,stopPropagation:E},xe=Symbol(ke);var lt=R({name:ke,props:rt,emits:["change"],setup(t,{emit:n,slots:f}){const r=Me(),e=be({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),c=Oe(),{children:m,linkChildren:h}=he(xe),o=_(()=>m.length),i=_(()=>e[t.vertical?"height":"width"]),u=_(()=>t.vertical?c.deltaY.value:c.deltaX.value),v=_(()=>e.rect?(t.vertical?e.rect.height:e.rect.width)-i.value*o.value:0),C=_(()=>Math.ceil(Math.abs(v.value)/i.value)),x=_(()=>o.value*i.value),$=_(()=>(e.active+o.value)%o.value),b=_(()=>{const a=t.vertical?"vertical":"horizontal";return c.direction.value===a}),$e=_(()=>{const a={transitionDuration:`${e.swiping?0:t.duration}ms`,transform:`translate${t.vertical?"Y":"X"}(${e.offset}px)`};if(i.value){const g=t.vertical?"height":"width",d=t.vertical?"width":"height";a[g]=`${x.value}px`,a[d]=t[d]?`${t[d]}px`:""}return a}),Be=a=>{const{active:g}=e;return a?t.loop?F(g+a,-1,o.value):F(g+a,0,C.value):g},Q=(a,g=0)=>{let d=a*i.value;t.loop||(d=Math.min(d,-v.value));let w=g-d;return t.loop||(w=F(w,v.value,0)),w},B=({pace:a=0,offset:g=0,emitChange:d})=>{if(o.value<=1)return;const{active:w}=e,p=Be(a),I=Q(p,g);if(t.loop){if(m[0]&&I!==v.value){const G=I<v.value;m[0].setOffset(G?x.value:0)}if(m[o.value-1]&&I!==0){const G=I>0;m[o.value-1].setOffset(G?-x.value:0)}}e.active=p,e.offset=I,d&&p!==w&&n("change",$.value)},O=()=>{e.swiping=!0,e.active<=-1?B({pace:o.value}):e.active>=o.value&&B({pace:-o.value})},Pe=()=>{O(),c.reset(),D(()=>{e.swiping=!1,B({pace:-1,emitChange:!0})})},Z=()=>{O(),c.reset(),D(()=>{e.swiping=!1,B({pace:1,emitChange:!0})})};let ee;const T=()=>clearTimeout(ee),A=()=>{T(),t.autoplay>0&&o.value>1&&(ee=setTimeout(()=>{Z(),A()},+t.autoplay))},P=(a=+t.initialSwipe)=>{if(!r.value)return;const g=()=>{var d,w;if(!oe(r)){const p={width:r.value.offsetWidth,height:r.value.offsetHeight};e.rect=p,e.width=+((d=t.width)!=null?d:p.width),e.height=+((w=t.height)!=null?w:p.height)}o.value&&(a=Math.min(o.value-1,a)),e.active=a,e.swiping=!0,e.offset=Q(a),m.forEach(p=>{p.setOffset(0)}),A()};oe(r)?ye().then(g):g()},te=()=>P(e.active);let ae;const Se=a=>{!t.touchable||(c.start(a),ae=Date.now(),T(),O())},Te=a=>{t.touchable&&e.swiping&&(c.move(a),b.value&&(Ve(a,t.stopPropagation),B({offset:u.value})))},ne=()=>{if(!t.touchable||!e.swiping)return;const a=Date.now()-ae,g=u.value/a;if((Math.abs(g)>.25||Math.abs(u.value)>i.value/2)&&b.value){const w=t.vertical?c.offsetY.value:c.offsetX.value;let p=0;t.loop?p=w>0?u.value>0?-1:1:0:p=-Math[u.value>0?"ceil":"floor"](u.value/i.value),B({pace:p,emitChange:!0})}else u.value&&B({pace:0});e.swiping=!1,A()},Ae=(a,g={})=>{O(),c.reset(),D(()=>{let d;t.loop&&a===o.value?d=e.active===0?0:a:d=a%o.value,g.immediate?D(()=>{e.swiping=!1}):e.swiping=!1,B({pace:d-e.active,emitChange:!0})})},Ie=(a,g)=>{const d=g===$.value,w=d?{backgroundColor:t.indicatorColor}:void 0;return s("i",{style:w,class:Y("indicator",{active:d})},null)},ze=()=>{if(f.indicator)return f.indicator({active:$.value,total:o.value});if(t.showIndicators&&o.value>1)return s("div",{class:Y("indicators",{vertical:t.vertical})},[Array(o.value).fill("").map(Ie)])};return U({prev:Pe,next:Z,state:e,resize:te,swipeTo:Ae}),h({size:i,props:t,count:o,activeIndicator:$}),z(()=>t.initialSwipe,a=>P(+a)),z(o,()=>P(e.active)),z(()=>t.autoplay,A),z([De,Le],te),z(Ne(),a=>{a==="visible"?A():T()}),we(P),Ye(()=>P(e.active)),Ge(()=>P(e.active)),qe(T),Fe(T),()=>{var a;return s("div",{ref:r,class:Y()},[s("div",{style:$e.value,class:Y("track",{vertical:t.vertical}),onTouchstart:Se,onTouchmove:Te,onTouchend:ne,onTouchcancel:ne},[(a=f.default)==null?void 0:a.call(f)]),ze()])}}});const fe=M(lt),[ut,dt]=j("swipe-item");var vt=R({name:ut,setup(t,{slots:n}){let f;const r=be({offset:0,inited:!1,mounted:!1}),{parent:e,index:c}=K(xe);if(!e)return;const m=_(()=>{const i={},{vertical:u}=e.props;return e.size.value&&(i[u?"height":"width"]=`${e.size.value}px`),r.offset&&(i.transform=`translate${u?"Y":"X"}(${r.offset}px)`),i}),h=_(()=>{const{loop:i,lazyRender:u}=e.props;if(!u||f)return!0;if(!r.mounted)return!1;const v=e.activeIndicator.value,C=e.count.value-1,x=v===0&&i?C:v-1,$=v===C&&i?0:v+1;return f=c.value===v||c.value===x||c.value===$,f}),o=i=>{r.offset=i};return we(()=>{ye(()=>{r.mounted=!0})}),U({setOffset:o}),()=>{var i;return s("div",{class:dt(),style:m.value},[h.value?(i=n.default)==null?void 0:i.call(n):null])}}});const ge=M(vt);const ft={components:{[ie.name]:ie,[ce.name]:ce,[W.name]:W,[re.name]:re,[le.name]:le,[fe.name]:fe,[ge.name]:ge,[ue.name]:ue,[ve.name]:ve,[de.name]:de},data(){return{goodsList:[{id:"1",title:"\u8FDB\u53E3\u9999\u8549",desc:"\u7EA6250g\uFF0C2\u6839",price:200,express:"8.00",num:1,thumb:[L+"/images/banana.jpeg"]},{id:"2",title:"\u9655\u897F\u871C\u68A8",desc:"\u7EA6600g",price:690,express:"10.00",num:1,thumb:[L+"/images/sydney.jpeg"]},{id:"3",title:"\u7F8E\u56FD\u4F3D\u529B\u679C",desc:"\u7EA6680g/3\u4E2A",price:2680,express:"\u514D\u8FD0\u8D39",num:1,thumb:[L+"/images/apple1.jpeg",L+"/images/apple2.jpeg"]}],goods:{title:"\u7F8E\u56FD\u4F3D\u529B\u679C\uFF08\u7EA6680g/3\u4E2A\uFF09",price:2680,express:"\u514D\u8FD0\u8D39",remain:19,thumb:["https://img.yzcdn.cn/public_files/2017/10/24/e5a5a02309a41f9f5def56684808d9ae.jpeg","https://img.yzcdn.cn/public_files/2017/10/24/1791ba14088f9c2be8c610d0a6cc0f93.jpeg"]}}},created(){console.log("Goods created"),this.getGoods();const{id:t}=this.$route.query;this.unBeforeEach=this.$keepRouter.beforeEach("goods",n=>{if(n.query.id!==t)return n.cache=!1;n.cache=!0})},mounted(){this.$toast.loading({message:"\u6A21\u62DF\u52A0\u8F7D\u4E2D...",forbidClick:!0,duration:1e3})},activated(){console.log("Goods activated")},beforeUnmount(){this.unBeforeEach()},methods:{addCart(){this.$toast.success({message:"\u6DFB\u52A0\u8D2D\u7269\u8F66\u6210\u529F\uFF0C\u9500\u6BC1\u8D2D\u7269\u8F66\u9875\u9762"}),this.$keepRouter.destroy("cart")},getGoods(){let{goodsList:t,$route:{query:n}}=this;this.goods=t.find(f=>f.id===n.id&&f)},formatPrice(){return"\xA5"+(this.goods.price/100).toFixed(2)},onClickCart(){this.$router.push("cart")},sorry(){He("\u6682\u65E0\u540E\u7EED\u903B\u8F91~")}}},gt={class:"goods"},ht=["src"],mt={class:"goods-title"},pt={class:"goods-price"},_t=S("span",{class:"van-cell-text"},"\u4E0D\u9500\u6BC1user\uFF0C\u8DF3\u8F6C\u56DEuser",-1),bt=y("\u70B9\u51FB"),wt=S("span",{class:"van-cell-text"},"\u4E0D\u9500\u6BC1\u8D2D\u7269\u8F66\u9875\u9762\uFF0C\u8DF3\u8F6C\u56DE\u8D2D\u7269\u8F66",-1),yt=y("\u70B9\u51FB"),Ct=S("span",{class:"van-cell-text"},"\u9500\u6BC1\u8D2D\u7269\u8F66\u9875\u9762\uFF0C\u8DF3\u8F6C\u56DE\u8D2D\u7269\u8F66",-1),kt=y("\u70B9\u51FB"),xt=y("\u70B9\u51FB"),$t=y(" \u5BA2\u670D "),Bt=y(" \u8D2D\u7269\u8F66 "),Pt=y(" \u52A0\u5165\u8D2D\u7269\u8F66 "),St=y("\u70B9\u51FB"),Tt=y(" \u7ACB\u5373\u8D2D\u4E70 ");function At(t,n,f,r,e,c){const m=k("van-swipe-item"),h=k("van-swipe"),o=k("van-cell"),i=k("van-col"),u=k("van-cell-group"),v=k("van-tag"),C=k("van-action-bar-icon"),x=k("van-action-bar-button"),$=k("van-action-bar");return V(),se("div",gt,[s(h,{class:"goods-swipe",autoplay:3e3,onClick:n[0]||(n[0]=b=>t.$router.push({name:"cart",cache:!0}))},{default:l(()=>[(V(!0),se(We,null,Ke(e.goods.thumb,b=>(V(),Ue(m,{key:b},{default:l(()=>[S("img",{src:b},null,8,ht)]),_:2},1024))),128))]),_:1}),s(u,null,{default:l(()=>[s(o,null,{default:l(()=>[S("div",mt,N(e.goods.title),1),S("div",pt,N(c.formatPrice(e.goods.price)),1)]),_:1}),s(o,{class:"goods-express"},{default:l(()=>[s(i,{span:"10",onClick:n[1]||(n[1]=b=>t.$router.jump(-1,{cache:!0}))},{default:l(()=>[y("\u8FD0\u8D39go\uFF1A"+N(e.goods.express),1)]),_:1}),s(i,{span:"14",onClick:n[2]||(n[2]=b=>t.$router.back({cache:!0}))},{default:l(()=>[y("\u5269\u4F59back\uFF1A"+N(e.goods.remain),1)]),_:1})]),_:1})]),_:1}),s(u,{class:"goods-cell-group"},{default:l(()=>[s(o,{value:"\u8FDB\u5165\u8D2D\u7269\u8F66",icon:"cart","is-link":"",onClick:n[3]||(n[3]=b=>t.$router.jump({type:"push",name:"user",cache:!0}))},{title:l(()=>[_t,s(v,{class:"goods-tag",type:"danger"},{default:l(()=>[bt]),_:1})]),_:1}),s(o,{value:"\u8FDB\u5165\u8D2D\u7269\u8F66",icon:"cart","is-link":"",onClick:n[4]||(n[4]=b=>t.$router.jump({type:"push",name:"cart",cache:!0}))},{title:l(()=>[wt,s(v,{class:"goods-tag",type:"danger"},{default:l(()=>[yt]),_:1})]),_:1}),s(o,{title:"\u7EBF\u4E0B\u95E8\u5E97",icon:"cart","is-link":"",onClick:n[5]||(n[5]=b=>t.$router.push({name:"cart"}))},{title:l(()=>[Ct,s(v,{class:"goods-tag",type:"danger"},{default:l(()=>[kt]),_:1})]),_:1})]),_:1}),s(u,{class:"goods-cell-group"},{default:l(()=>[s(o,{title:"\u56DE\u5230\u8D2D\u7269\u8F66\uFF0C\u9500\u6BC1\u5168\u90E8\u7F13\u5B58\u9875\u9762","is-link":"",onClick:n[6]||(n[6]=b=>t.$router.push({name:"cart",destroy:"ALL"}))},{default:l(()=>[s(v,{class:"goods-tag",type:"danger"},{default:l(()=>[xt]),_:1})]),_:1})]),_:1}),s($,null,{default:l(()=>[s(C,{icon:"chat-o",onClick:c.sorry},{default:l(()=>[$t]),_:1},8,["onClick"]),s(C,{icon:"cart-o",onClick:c.onClickCart},{default:l(()=>[Bt]),_:1},8,["onClick"]),s(x,{type:"warning",onClick:c.addCart},{default:l(()=>[Pt,s(v,{class:"goods-tag",type:"danger"},{default:l(()=>[St]),_:1})]),_:1},8,["onClick"]),s(x,{type:"danger",onClick:c.sorry},{default:l(()=>[Tt]),_:1},8,["onClick"])]),_:1})])}var Rt=Xe(ft,[["render",At]]);export{Rt as default};
//# sourceMappingURL=index.14ba0999.js.map
